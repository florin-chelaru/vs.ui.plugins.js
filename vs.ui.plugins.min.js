(function(){/*
 vs.ui.plugins.js
 Copyright (c) 2015 Florin Chelaru
 License: MIT

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
 permit persons to whom the Software is furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
 Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
 WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
'use strict';var x=this;Math.random();function y(a,d){var b=a.split("."),c=x;b[0]in c||!c.execScript||c.execScript("var "+b[0]);for(var r;b.length&&(r=b.shift());)b.length||void 0===d?c[r]?c=c[r]:c=c[r]={}:c[r]=d}function z(a,d){function b(){}b.prototype=d.prototype;a.g=d.prototype;a.prototype=new b;a.prototype.constructor=a;a.f=function(b,a,v){for(var h=Array(arguments.length-2),e=2;e<arguments.length;e++)h[e-2]=arguments[e];return d.prototype[a].apply(b,h)}};var vs={ui:{}};u.extend(vs,this.vs);u.extend(vs.ui,this.vs.ui);vs.ui.plugins={};vs.ui.plugins.canvas={};
vs.ui.plugins.canvas.b=function(){function a(){vs.ui.canvas.CanvasVis.apply(this,arguments);this[d]=null}var d=Symbol("_quadTree");z(a,vs.ui.canvas.CanvasVis);a.c=u.extend({},vs.ui.canvas.CanvasVis.Settings,{rows:vs.ui.Setting.PredefinedSettings.rows,vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:new vs.ui.Setting({key:"xBoundaries",type:"vs.models.Boundaries",defaultValue:vs.ui.Setting.rowBoundaries,label:"x boundaries",template:"_boundaries.html"}),yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,
xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,
selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(a.prototype,{settings:{get:function(){return a.c}}});a.prototype.beginDraw=function(){var b=this,a=arguments;return new Promise(function(r){vs.ui.canvas.CanvasVis.prototype.beginDraw.apply(b,a).then(function(){var a=b.data;if(b.data.isReady&&a.nrows){var c=b.optionValue("margins"),e=b.optionValue("xScale"),q=b.optionValue("yScale"),k=b.optionValue("cols"),f=b.optionValue("rows")[0],l=b.optionValue("vals"),
m=b.optionValue("itemRatio"),g=b.optionValue("width"),n=b.optionValue("height"),p=Math.min(Math.abs(g),Math.abs(n))*m,t=new u.QuadTree(c.left,c.top,g-c.left-c.right,n-c.top-c.bottom,m,10),w=vs.models.Transformer.scale(e,q).translate({x:c.left,y:c.top});a.asDataRowArray().forEach(function(b){var a={x:parseFloat(b.info(f)),y:b.val(k[0],l)},a=w.calc(a);t.insert(a.x-p,a.y-p,2*p,2*p,b)});b[d]=t}r()})})};a.prototype.endDraw=function(){var b=this,a=arguments;return(new Promise(function(a,c){var h=b.data;
if(b.data.isReady)if(h.nrows){var e=b.optionValue("margins"),d=b.optionValue("xScale"),k=b.optionValue("yScale"),f=b.optionValue("cols"),l=b.optionValue("rows")[0],m=b.optionValue("vals"),g=b.optionValue("itemRatio"),n=b.optionValue("width"),p=b.optionValue("height"),t=Math.min(Math.abs(n),Math.abs(p))*g,w=b.optionValue("fill"),B=b.optionValue("stroke"),C=b.optionValue("strokeThickness"),D=b.pendingCanvas[0].getContext("2d"),E=vs.models.Transformer.scale(d,k).translate({x:e.left,y:e.top}),h=h.asDataRowArray();
u.async.each(h,function(b){return new Promise(function(a){setTimeout(function(){var c=E.calc({x:parseFloat(b.info(l)),y:b.val(f[0],m)});vs.ui.canvas.CanvasVis.circle(D,c.x,c.y,t,w,B,C);a()},0)})}).then(a,c)}else a();else a()})).then(function(){return vs.ui.canvas.CanvasVis.prototype.endDraw.apply(b,a)})};a.prototype.getItemsAt=function(b,a){return this[d]?this[d].collisions(b,a).map(function(b){return b.value}):[]};a.prototype.drawHighlightItem=function(b,a){var r=this.optionValue("margins"),v=this.optionValue("xScale"),
h=this.optionValue("yScale"),e=this.optionValue("cols"),d=this.optionValue("rows")[0],k=this.optionValue("vals"),f=this.optionValue("itemRatio"),l=this.optionValue("width"),m=this.optionValue("height"),f=Math.min(Math.abs(l),Math.abs(m))*f,l=this.optionValue("selectFill"),m=this.optionValue("selectStroke"),g=this.optionValue("selectStrokeThickness"),r=vs.models.Transformer.scale(v,h).translate({x:r.left,y:r.top}).calc({x:parseFloat(a.info(d)),y:a.val(e[0],k)}),v=b[0].getContext("2d");vs.ui.canvas.CanvasVis.circle(v,
r.x,r.y,f,l,m,g)};return a}();vs.ui.plugins.canvas.a=function(){function a(){vs.ui.canvas.CanvasVis.apply(this,arguments);this[d]=null}var d=Symbol("_quadTree");z(a,vs.ui.canvas.CanvasVis);a.c=u.extend({},vs.ui.canvas.CanvasVis.Settings,{vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,
itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(a.prototype,
{settings:{get:function(){return a.c}}});a.prototype.beginDraw=function(){var b=this,a=arguments;return new Promise(function(r){vs.ui.canvas.CanvasVis.prototype.beginDraw.apply(b,a).then(function(){var a=b.data;if(b.data.isReady&&a.nrows){var a=b.optionValue("margins"),c=b.optionValue("cols"),e=b.optionValue("vals"),q=b.optionValue("itemRatio"),k=b.optionValue("xScale"),f=b.optionValue("yScale"),l=b.optionValue("width"),m=b.optionValue("height"),g=Math.min(Math.abs(l),Math.abs(m))*q,n=c[0],p=c[1],
t=new u.QuadTree(a.left,a.top,l-a.left-a.right,m-a.top-a.bottom,q,10),w=vs.models.Transformer.scale(k,f).translate({x:a.left,y:a.top});b.data.asDataRowArray().forEach(function(a){var b={x:a.val(n,e),y:a.val(p,e)},b=w.calc(b);t.insert(b.x-g,b.y-g,2*g,2*g,a)});b[d]=t}r()})})};a.prototype.endDraw=function(){var a=this,c=arguments;return(new Promise(function(c,d){var h=a.data;if(a.data.isReady)if(h.nrows){var e=a.optionValue("margins"),q=a.optionValue("xScale"),k=a.optionValue("yScale"),f=a.optionValue("cols"),
l=a.optionValue("vals"),m=a.optionValue("itemRatio"),g=a.optionValue("width"),n=a.optionValue("height"),p=Math.min(Math.abs(g),Math.abs(n))*m,t=f[0],w=f[1],B=a.optionValue("fill"),C=a.optionValue("stroke"),D=a.optionValue("strokeThickness"),E=a.pendingCanvas[0].getContext("2d"),G=vs.models.Transformer.scale(q,k).translate({x:e.left,y:e.top}),h=h.asDataRowArray();u.async.each(h,function(a){return new Promise(function(b){setTimeout(function(){var c=G.calc({x:a.val(t,l),y:a.val(w,l)});vs.ui.canvas.CanvasVis.circle(E,
c.x,c.y,p,B,C,D);b()},0)})}).then(c,d)}else c();else c()})).then(function(){return vs.ui.canvas.CanvasVis.prototype.endDraw.apply(a,c)})};a.prototype.getItemsAt=function(a,c){return this[d]?this[d].collisions(a,c).map(function(a){return a.value}):[]};a.prototype.drawHighlightItem=function(a,c){var d=this.optionValue("margins"),v=this.optionValue("xScale"),h=this.optionValue("yScale"),e=this.optionValue("cols"),q=this.optionValue("vals"),k=this.optionValue("itemRatio"),f=this.optionValue("width"),
l=this.optionValue("height"),m=this.optionValue("selectFill"),g=this.optionValue("selectStroke"),n=this.optionValue("selectStrokeThickness"),d=vs.models.Transformer.scale(v,h).translate({x:d.left,y:d.top}),k=Math.min(Math.abs(f),Math.abs(l))*k,f=e[1],e=d.calc({x:c.val(e[0],q),y:c.val(f,q)}),q=a[0].getContext("2d");vs.ui.canvas.CanvasVis.circle(q,e.x,e.y,k,m,g,n)};return a}();vs.ui.plugins.svg={};function A(){vs.ui.svg.SvgVis.apply(this,arguments)}z(A,vs.ui.svg.SvgVis);
var F=u.extend({},vs.ui.VisHandler.Settings,{vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,
stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(A.prototype,{settings:{get:function(){return F}}});
A.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){var c=a.data;if(c.nrows){var d=a.optionValue("margins"),v=a.optionValue("xScale"),h=a.optionValue("yScale"),e=a.optionValue("cols"),q=a.optionValue("vals"),k=a.optionValue("itemRatio"),f=a.optionValue("width"),l=a.optionValue("height"),m=a.optionValue("fill"),g=a.optionValue("stroke"),n=a.optionValue("strokeThickness"),k=Math.min(Math.abs(f),Math.abs(l))*k,p=e[0],t=e[1],f=d3.select(a.$element[0]).select("svg"),e=
f.select(".viewport");e.empty()&&(e=f.append("g").attr("class","viewport"));e.attr("transform","translate("+d.left+", "+d.top+")");c=c.asDataRowArray();c=e.selectAll("circle").data(c,vs.models.DataSource.key);c.enter().append("circle").attr("class","vs-item");c.attr("r",k).attr("cx",function(a){return v(a.val(p,q))}).attr("cy",function(a){return h(a.val(t,q))}).attr("fill",m).style("stroke",g).style("stroke-width",n);c.exit().remove()}b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,
d)})};function H(){vs.ui.svg.SvgVis.apply(this,arguments)}z(H,vs.ui.svg.SvgVis);
var I=u.extend({},vs.ui.VisHandler.Settings,{rows:vs.ui.Setting.PredefinedSettings.rows,vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:new vs.ui.Setting({key:"xBoundaries",type:"vs.models.Boundaries",defaultValue:vs.ui.Setting.rowBoundaries,label:"x boundaries",template:"_boundaries.html"}),yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",
type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(H.prototype,{settings:{get:function(){return I}}});
H.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){var c=a.data;if(c.nrows){var d=a.optionValue("margins"),v=a.optionValue("xScale"),h=a.optionValue("yScale"),e=a.optionValue("cols"),q=a.optionValue("rows")[0],k=a.optionValue("vals"),f=a.optionValue("fill"),l=a.optionValue("stroke"),m=a.optionValue("strokeThickness"),g=a.optionValue("itemRatio"),n=a.optionValue("width"),p=a.optionValue("height"),g=Math.min(Math.abs(n),Math.abs(p))*g,p=d3.select(a.$element[0]).select("svg"),
n=p.select(".viewport");n.empty()&&(n=p.append("g").attr("class","viewport"));n.attr("transform","translate("+d.left+", "+d.top+")");c=c.asDataRowArray();c=n.selectAll("circle").data(c,vs.models.DataSource.key);c.enter().append("circle").attr("class","vs-item");c.attr("r",g).attr("cx",function(a){return v(parseFloat(a.info(q)))}).attr("cy",function(a){return h(a.val(e[0],k))}).attr("fill",f).style("stroke",l).style("stroke-width",m);c.exit().remove()}b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,
d)})};y("vs.ui.plugins.canvas.ManhattanPlot",vs.ui.plugins.canvas.b);vs.ui.plugins.canvas.b.prototype.endDraw=vs.ui.plugins.canvas.b.prototype.endDraw;y("vs.ui.plugins.canvas.ScatterPlot",vs.ui.plugins.canvas.a);vs.ui.plugins.canvas.a.prototype.endDraw=vs.ui.plugins.canvas.a.prototype.endDraw;vs.ui.plugins.canvas.a.prototype.getItemsAt=vs.ui.plugins.canvas.a.prototype.getItemsAt;vs.ui.plugins.canvas.a.prototype.drawHighlightItem=vs.ui.plugins.canvas.a.prototype.drawHighlightItem;y("vs.ui.plugins.svg.ManhattanPlot",H);H.prototype.endDraw=H.prototype.endDraw;y("vs.ui.plugins.svg.ScatterPlot",A);A.prototype.endDraw=A.prototype.endDraw;}).call(this); //@ sourceMappingURL=vs.ui.plugins.min.js.map
