(function(){/*
 vs.ui.plugins.js
 Copyright (c) 2015 Florin Chelaru
 License: MIT

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
 permit persons to whom the Software is furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
 Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
 WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
'use strict';var w=this;Math.random();function B(c,h){var b=c.split("."),a=w;b[0]in a||!a.execScript||a.execScript("var "+b[0]);for(var t;b.length&&(t=b.shift());)b.length||void 0===h?a[t]?a=a[t]:a=a[t]={}:a[t]=h}function C(c,h){function b(){}b.prototype=h.prototype;c.m=h.prototype;c.prototype=new b;c.prototype.constructor=c;c.l=function(a,b,g){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return h.prototype[b].apply(a,c)}};var vs={ui:{}};u.extend(vs,this.vs);u.extend(vs.ui,this.vs.ui);vs.ui.plugins={};vs.ui.plugins.canvas={};
vs.ui.plugins.canvas.a=function(){function c(){vs.ui.canvas.CanvasVis.apply(this,arguments);this[b]=null;this[h]=null;var a=this;this.$scope.$watch(function(){return{cols:a.options.cols,xVal:a.options.xVal,mergeCols:a.options.mergeCols}},function(){a.schedulePreProcessData().then(function(){a.scheduleRedraw()})},!0)}var h=Symbol("_quadTree"),b=Symbol("_merged");C(c,vs.ui.canvas.CanvasVis);c.j=function(a,b,g,c){var d=["yBoundaries","width","margins"];if(!c)throw new vs.ui.UiException('Settings not provided for "xScale", which depends on '+JSON.stringify(d));
d.forEach(function(a){if(!(a in c))throw new vs.ui.UiException('Missing dependency for "'+a+'" in the "xScale" defaultValue function');});var d=c.yBoundaries.getValue(a,b,g,c),f=c.width.getValue(a,b,g,c);a=c.margins.getValue(a,b,g,c);return d3.scale.linear().domain([d.min,d.max]).range([0,f-a.left-a.right])};c.i=u.extend({},vs.ui.canvas.CanvasVis.Settings,{xVal:vs.ui.Setting.PredefinedSettings.xVal,yVal:vs.ui.Setting.PredefinedSettings.yVal,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,
yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:new vs.ui.Setting({key:"xScale",type:vs.ui.Setting.Type.FUNCTION,defaultValue:c.j,hidden:!0}),yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,mergeCols:vs.ui.Setting.PredefinedSettings.mergeCols,vals:new vs.ui.Setting({key:"vals",type:vs.ui.Setting.Type.DATA_ROW_LABEL,defaultValue:vs.ui.Setting.firstRowsLabel,label:"values",template:"_categorical.html"}),itemRatio:new vs.ui.Setting({key:"itemRatio",
type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(c.prototype,{settings:{get:function(){return c.i}}});
c.prototype.beginDraw=function(){var a=this,c=arguments;return new Promise(function(g){vs.ui.canvas.CanvasVis.prototype.beginDraw.apply(a,c).then(function(){var c=a[b];if(c&&c.d.length){var d=a.optionValue("cols"),f=a.optionValue("margins"),t=a.optionValue("yBoundaries");a.optionValue("xVal");var k=a.optionValue("yVal"),l=a.optionValue("itemRatio"),p=a.optionValue("xScale"),v=a.optionValue("yScale"),q=a.optionValue("width"),m=a.optionValue("height"),n=Math.min(Math.abs(q),Math.abs(m))*l,r=d[0],x=
d[1],y=new u.QuadTree(f.left,f.top,q-f.left-f.right,m-f.top-f.bottom,l,10),z=vs.models.Transformer.scale(p,v).translate({x:f.left,y:f.top});c.d.forEach(function(a){var b=z.calc({x:void 0!=a[r]?a[r][k]:t.min,y:void 0!=a[x]?a[x][k]:t.min});y.insert(b.x-n,b.y-n,2*n,2*n,a)});a[h]=y}g()})})};c.prototype.endDraw=function(){var a=this,c=arguments;return(new Promise(function(c,e){var d=a[b];if(d&&d.d.length){var f=a.optionValue("margins"),t=a.optionValue("xScale"),k=a.optionValue("yScale"),l=a.optionValue("cols"),
p=a.optionValue("yBoundaries");a.optionValue("xVal");var h=a.optionValue("yVal"),q=a.optionValue("itemRatio"),m=a.optionValue("width"),n=a.optionValue("height"),r=Math.min(Math.abs(m),Math.abs(n))*q,x=l[0],y=l[1],z=a.optionValue("fill"),D=a.optionValue("stroke"),E=a.optionValue("strokeThickness"),H=a.pendingCanvas[0].getContext("2d"),I=vs.models.Transformer.scale(t,k).translate({x:f.left,y:f.top});u.async.each(d.d,function(a){return new Promise(function(b){setTimeout(function(){var c=I.calc({x:void 0!=
a[x]?a[x][h]:p.min,y:void 0!=a[y]?a[y][h]:p.min});vs.ui.canvas.CanvasVis.circle(H,c.x,c.y,r,void 0==a[x]||void 0==a[y]?"rgba(170,170,170,0.5)":z,void 0==a[x]||void 0==a[y]?"rgb(170,170,170)":D,E);b()},0)})}).then(c,e)}else c()})).then(function(){return vs.ui.canvas.CanvasVis.prototype.endDraw.apply(a,c)})};c.prototype.getItemsAt=function(){return[]};c.prototype.highlightItem=function(){};c.prototype.preProcessData=function(){var a=this;return new Promise(function(c,g){Promise.all(a.data.map(function(a){return a.ready})).then(function(){var e=
a.optionValue("cols"),d=a.optionValue("xVal"),f=e.map(function(b){return a.data[u.array.indexOf(a.data,function(a){return a.id==b})]});2>f.length?g("Scatter plot needs two columns of data, but only received "+e.length):(e=a.optionValue("mergeCols"),a[b]=e(d,f),c())})})};return c}();vs.ui.plugins.svg={};function F(){vs.ui.svg.SvgVis.apply(this,arguments)}C(F,vs.ui.svg.SvgVis);
var G=u.extend({},vs.ui.VisHandler.Settings,{xVal:vs.ui.Setting.PredefinedSettings.xVal,yVal:vs.ui.Setting.PredefinedSettings.yVal,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),
fills:vs.ui.Setting.PredefinedSettings.fills,fillOpacity:vs.ui.Setting.PredefinedSettings.fillOpacity,strokes:vs.ui.Setting.PredefinedSettings.strokes,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(F.prototype,{settings:{get:function(){return G}}});
F.prototype.endDraw=function(){var c=this,h=arguments;return(new Promise(function(b){var a=c.data,t=c.optionValue("cols"),a=a.filter(function(a){return 0<=t.indexOf(a.id)});if(a.length&&vs.models.DataSource.allDataIsReady(a)){var g=c.optionValue("margins"),e=c.optionValue("xScale"),d=c.optionValue("yScale"),f=c.optionValue("xVal"),A=c.optionValue("yVal"),h=c.optionValue("fills"),l=c.optionValue("fillOpacity"),p=c.optionValue("strokes"),v=c.optionValue("strokeThickness"),q=c.optionValue("itemRatio"),
m=c.optionValue("width"),n=c.optionValue("height"),q=Math.min(Math.abs(m),Math.abs(n))*q,n=d3.select(c.$element[0]).select("svg"),m=n.select(".viewport");m.empty()&&(m=n.append("g").attr("class","viewport"));m.attr("transform","translate("+g.left+", "+g.top+")");var a=u.fast.concat(u.fast.map(a,function(a){return a.d})),a=m.selectAll("circle").data(a,J(c)),r=u.mapToObject(c.data,function(a){return{key:a.id,value:a}});a.enter().append("circle").attr("class","vs-item").on("mouseover",function(a){a&&
c.brushing.fire(new vs.ui.BrushingEvent(r[a.__d__],vs.ui.BrushingEvent.Action.MOUSEOVER,a))}).on("mouseout",function(a){a&&c.brushing.fire(new vs.ui.BrushingEvent(r[a.__d__],vs.ui.BrushingEvent.Action.MOUSEOUT,a))}).on("click",function(){d3.event.stopPropagation()});a.attr("r",q).attr("cx",function(a){return e(parseFloat(a[f]))}).attr("cy",function(a){return d(parseFloat(a[A]))}).style("fill",function(a){return u.hex2rgba(h(a.__d__),l)}).style("stroke",function(a){return p([a.__d__])}).style("stroke-width",
v);a.exit().remove()}b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(c,h)})};
F.prototype.highlightItem=function(c,h){var b=d3.select(this.$element[0]).select("svg").select(".viewport");if(!b.empty()){var a=J(this),t=u.mapToObject(h,function(b){return{key:a(b),value:!0}}),g=b.selectAll(".vs-item").filter(function(b){return a(b)in t});if(!g.empty()){var e=this.optionValue("selectFill"),d=this.optionValue("selectStroke"),f=this.optionValue("selectStrokeThickness");g.style("stroke",d).style("stroke-width",f).style("fill",e);$(g[0]).appendTo($(b[0]))}}};
F.prototype.unhighlightItem=function(c,h){var b=d3.select(this.$element[0]).select("svg").select(".viewport");if(!b.empty()){var a=J(this),t=u.mapToObject(h,function(b){return{key:a(b),value:!0}}),b=b.selectAll(".vs-item").filter(function(b){return a(b)in t});if(!b.empty()){var g=this.optionValue("fills"),e=this.optionValue("strokes"),d=this.optionValue("fillOpacity"),f=this.optionValue("strokeThickness");b.style("fill",function(a){return u.hex2rgba(g(a.__d__),d)}).style("stroke",function(a){return e([a.__d__])}).style("stroke-width",
f)}}};function J(c){var h=c.optionValue("xVal");return function(b){return b.__d__+"-"+b[h]}};vs.ui.plugins.svg.c=function(){function c(){vs.ui.svg.SvgVis.apply(this,arguments);this[h]=null;var a=this;this.$scope.$watch(function(){return{cols:a.options.cols,xVal:a.options.xVal,mergeCols:a.options.mergeCols}},function(){a.schedulePreProcessData().then(function(){a.scheduleRedraw()})},!0)}var h=Symbol("_merged"),b=Symbol("_key");C(c,vs.ui.svg.SvgVis);c.i=u.extend({},vs.ui.VisHandler.Settings,{xVal:vs.ui.Setting.PredefinedSettings.xVal,yVal:vs.ui.Setting.PredefinedSettings.yVal,mergeCols:vs.ui.Setting.PredefinedSettings.mergeCols,
xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,cols:vs.ui.Setting.PredefinedSettings.cols,fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});
Object.defineProperties(c.prototype,{settings:{get:function(){return c.i}}});c.prototype.endDraw=function(){var a=this,c=arguments;return(new Promise(function(c){var e=a[h];if(e&&e.d.length){var d=a.optionValue("margins"),f=a.optionValue("cols"),t=a.optionValue("yVal"),k=a.optionValue("width"),l=a.optionValue("height"),p=a.optionValue("yBoundaries"),v=a.optionValue("fill"),q=d3.scale.linear().domain([0,e.d.length]).range([0,k-d.left-d.right]),m=d3.scale.linear().domain([0,f.length]).range([0,l-d.top-
d.bottom]),n=d3.scale.linear().domain([p.min,p.max]).range(["#ffffff",v]),l=d3.select(a.$element[0]).select("svg"),k=l.select(".viewport");k.empty()&&(k=l.append("g").attr("class","viewport"));k.attr("transform","translate("+d.left+", "+d.top+")");var l=u.fast.concat(u.fast.map(e.d,function(a){return f.map(function(b){return a[b]})})),r=u.mapToObject(a.data,function(a){return{key:a.id,value:a}}),e=q(1),d=m(1),k=k.selectAll("rect").data(l,a[b]());k.enter().append("rect").attr("class","vs-item").on("mouseover",
function(b){b&&a.brushing.fire(new vs.ui.BrushingEvent(r[b.__d__],vs.ui.BrushingEvent.Action.MOUSEOVER,b))}).on("mouseout",function(b){b&&a.brushing.fire(new vs.ui.BrushingEvent(r[b.__d__],vs.ui.BrushingEvent.Action.MOUSEOUT,b))}).on("click",function(){d3.event.stopPropagation()});k.attr("x",function(a,b){return q(Math.floor(b/f.length))}).attr("y",function(a,b){return m(b%f.length)}).attr("width",e).attr("height",d).attr("fill",function(a){return a?n(a[t]):"#aaaaaa"});k.exit().remove()}c()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,
c)})};c.prototype.highlightItem=function(a,c){var g=d3.select(this.$element[0]).select("svg").select(".viewport");if(!g.empty()){var e=this[b](),d=u.mapToObject(c,function(a){return{key:e(a),value:!0}}),g=g.selectAll(".vs-item").filter(function(a){return e(a)in d});if(!g.empty()){var f=this.optionValue("selectFill");this.optionValue("selectStroke");this.optionValue("selectStrokeThickness");var h=this.optionValue("yBoundaries"),k=this.optionValue("yVal"),l=d3.scale.linear().domain([h.min,h.max]).range(["#ffffff",
f]);g.attr("fill",function(a){return l(a[k])})}}};c.prototype.unhighlightItem=function(a,c){var g=d3.select(this.$element[0]).select("svg").select(".viewport");if(!g.empty()){var e=this[b](),d=u.mapToObject(c,function(a){return{key:e(a),value:!0}}),g=g.selectAll(".vs-item").filter(function(a){return e(a)in d});if(!g.empty()){var f=this.optionValue("fill"),h=this.optionValue("yBoundaries"),k=this.optionValue("yVal"),l=d3.scale.linear().domain([h.min,h.max]).range(["#ffffff",f]);g.attr("fill",function(a){return l(a[k])})}}};
c.prototype.preProcessData=function(){var a=this;return new Promise(function(b){Promise.all(a.data.map(function(a){return a.ready})).then(function(){var c=a.optionValue("cols"),e=a.optionValue("xVal"),c=c.map(function(b){return a.data[u.array.indexOf(a.data,function(a){return a.id==b})]});1>c.length&&(a[h]=null,b());1==c.length&&(a[h]=c[0],b());var d=a.optionValue("mergeCols");a[h]=d(e,c);b()})})};c.prototype[b]=function(){var a=this.optionValue("xVal");return function(b,c){return void 0==b?c:b.__d__+
"-"+b[a]}};return c}();vs.ui.plugins.canvas.f=function(){function c(){vs.ui.canvas.CanvasVis.apply(this,arguments);this[h]=null}var h=Symbol("_quadTree");C(c,vs.ui.canvas.CanvasVis);c.i=u.extend({},vs.ui.canvas.CanvasVis.Settings,{xVal:vs.ui.Setting.PredefinedSettings.xVal,yVal:vs.ui.Setting.PredefinedSettings.yVal,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,
cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fills:vs.ui.Setting.PredefinedSettings.fills,fillOpacity:vs.ui.Setting.PredefinedSettings.fillOpacity,strokes:vs.ui.Setting.PredefinedSettings.strokes,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,
selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(c.prototype,{settings:{get:function(){return c.i}}});c.prototype.beginDraw=function(){var b=this,a=arguments;return new Promise(function(c){vs.ui.canvas.CanvasVis.prototype.beginDraw.apply(b,a).then(function(){var a=b.data,e=b.optionValue("cols"),a=a.filter(function(a){return 0<=e.indexOf(a.id)});if(a.length&&vs.models.DataSource.allDataIsReady(a)){var d=b.optionValue("margins"),f=b.optionValue("xScale"),
A=b.optionValue("yScale"),k=b.optionValue("xVal"),l=b.optionValue("yVal"),p=b.optionValue("itemRatio"),v=b.optionValue("width"),q=b.optionValue("height"),m=Math.min(Math.abs(v),Math.abs(q))*p,n=new u.QuadTree(d.left,d.top,v-d.left-d.right,q-d.top-d.bottom,p,10),r=vs.models.Transformer.scale(f,A).translate({x:d.left,y:d.top});u.fast.concat(u.fast.map(a,function(a){return a.d})).forEach(function(a){var b=r.calc({x:parseFloat(a[k]),y:parseFloat(a[l])});n.insert(b.x-m,b.y-m,2*m,2*m,a)});b[h]=n}c()})})};
c.prototype.endDraw=function(){var b=this,a=arguments;return(new Promise(function(a,c){var e=b.data,d=b.optionValue("cols"),e=e.filter(function(a){return 0<=d.indexOf(a.id)});if(e.length&&vs.models.DataSource.allDataIsReady(e)){var f=b.optionValue("margins"),h=b.optionValue("xScale"),k=b.optionValue("yScale"),l=b.optionValue("xVal"),p=b.optionValue("yVal"),v=b.optionValue("itemRatio"),q=b.optionValue("width"),m=b.optionValue("height"),n=Math.min(Math.abs(q),Math.abs(m))*v,r=b.optionValue("fills"),
x=b.optionValue("fillOpacity"),y=b.optionValue("strokes"),z=b.optionValue("strokeThickness"),D=b.pendingCanvas[0].getContext("2d"),E=vs.models.Transformer.scale(h,k).translate({x:f.left,y:f.top}),e=u.fast.concat(u.fast.map(e,function(a){return a.d}));u.async.each(e,function(a){return new Promise(function(b){setTimeout(function(){var c=E.calc({x:parseFloat(a[l]),y:parseFloat(a[p])});vs.ui.canvas.CanvasVis.circle(D,c.x,c.y,n,u.hex2rgba(r(a.__d__),x),y(a.__d__),z);b()},0)})}).then(a,c)}else a()})).then(function(){return vs.ui.canvas.CanvasVis.prototype.endDraw.apply(b,
a)})};c.prototype.getItemsAt=function(){return[]};c.prototype.highlightItem=function(){};return c}();vs.ui.plugins.svg.a=function(){function c(){vs.ui.svg.SvgVis.apply(this,arguments);this[h]=null;var b=this;this.$scope.$watch(function(){return{cols:b.options.cols,xVal:b.options.xVal,mergeCols:b.options.mergeCols}},function(){b.schedulePreProcessData().then(function(){b.scheduleRedraw()})},!0)}var h=Symbol("_merged");C(c,vs.ui.svg.SvgVis);c.j=function(b,a,c,g){var e=["yBoundaries","width","margins"];if(!g)throw new vs.ui.UiException('Settings not provided for "xScale", which depends on '+JSON.stringify(e));
e.forEach(function(a){if(!(a in g))throw new vs.ui.UiException('Missing dependency for "'+a+'" in the "xScale" defaultValue function');});var e=g.yBoundaries.getValue(b,a,c,g),d=g.width.getValue(b,a,c,g);b=g.margins.getValue(b,a,c,g);return d3.scale.linear().domain([e.min,e.max]).range([0,d-b.left-b.right])};c.i=u.extend({},vs.ui.VisHandler.Settings,{xVal:vs.ui.Setting.PredefinedSettings.xVal,yVal:vs.ui.Setting.PredefinedSettings.yVal,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,
xScale:new vs.ui.Setting({key:"xScale",type:vs.ui.Setting.Type.FUNCTION,defaultValue:c.j,hidden:!0}),yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,mergeCols:vs.ui.Setting.PredefinedSettings.mergeCols,vals:new vs.ui.Setting({key:"vals",type:vs.ui.Setting.Type.DATA_ROW_LABEL,defaultValue:vs.ui.Setting.firstRowsLabel,label:"values",template:"_categorical.html"}),itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",
template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(c.prototype,{settings:{get:function(){return c.i}}});c.prototype.endDraw=function(){var b=this,a=arguments;
return(new Promise(function(a){var c=b[h];if(c&&c.d.length){var e=b.optionValue("cols"),d=e[0],f=e[1],A=b.optionValue("margins"),k=b.optionValue("yBoundaries"),l=b.optionValue("xScale"),p=b.optionValue("yScale"),v=b.optionValue("xVal"),q=b.optionValue("yVal"),m=b.optionValue("itemRatio"),n=b.optionValue("width"),r=b.optionValue("height"),x=b.optionValue("fill"),y=b.optionValue("stroke"),e=b.optionValue("strokeThickness"),m=Math.min(Math.abs(n),Math.abs(r))*m,r=d3.select(b.$element[0]).select("svg"),
n=r.select(".viewport");n.empty()&&(n=r.append("g").attr("class","viewport"));n.attr("transform","translate("+A.left+", "+A.top+")");var c=c.d,c=n.selectAll("circle").data(c,function(a){return a[v]}),z=u.mapToObject(b.data,function(a){return{key:a.id,value:a}});c.enter().append("circle").attr("class","vs-item").on("mouseover",function(a){a[d]&&b.brushing.fire(new vs.ui.BrushingEvent(z[d],vs.ui.BrushingEvent.Action.MOUSEOVER,a[d]));a[f]&&b.brushing.fire(new vs.ui.BrushingEvent(z[f],vs.ui.BrushingEvent.Action.MOUSEOVER,
a[f]))}).on("mouseout",function(a){a[d]&&b.brushing.fire(new vs.ui.BrushingEvent(z[d],vs.ui.BrushingEvent.Action.MOUSEOUT,a[d]));a[f]&&b.brushing.fire(new vs.ui.BrushingEvent(z[f],vs.ui.BrushingEvent.Action.MOUSEOUT,a[f]))}).on("click",function(){d3.event.stopPropagation()});c.attr("r",m).attr("cx",function(a){return l(void 0!=a[d]?a[d][q]:k.min)}).attr("cy",function(a){return p(void 0!=a[f]?a[f][q]:k.min)}).style("fill",function(a){return void 0==a[d]||void 0==a[f]?"rgba(170,170,170,0.5)":x}).style("stroke",
function(a){return void 0==a[d]||void 0==a[f]?"rgb(170,170,170)":y}).style("stroke-width",e);c.exit().remove()}a()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(b,a)})};c.prototype.highlightItem=function(b,a){var c=d3.select(this.$element[0]).select("svg").select(".viewport");if(!c.empty()){var g=this.optionValue("xVal"),e=u.mapToObject(a,function(a){return{key:a[g],value:!0}}),d=c.selectAll(".vs-item").filter(function(a){return a[g]in e});if(!d.empty()){var f=this.optionValue("selectFill"),
h=this.optionValue("selectStroke"),k=this.optionValue("selectStrokeThickness");d.style("fill",f).style("stroke",h).style("stroke-width",k);$(d[0]).appendTo($(c))}}};c.prototype.unhighlightItem=function(b,a){var c=d3.select(this.$element[0]).select("svg").select(".viewport");if(!c.empty()){var g=this.optionValue("xVal"),e=u.mapToObject(a,function(a){return{key:a[g],value:!0}}),c=c.selectAll(".vs-item").filter(function(a){return a[g]in e});if(!c.empty()){var d=this.optionValue("fill"),f=this.optionValue("stroke"),
h=this.optionValue("strokeThickness"),k=this.optionValue("cols"),l=k[0],p=k[1];c.style("stroke-width",h).style("fill",function(a){return void 0==a[l]||void 0==a[p]?"rgba(170,170,170,0.5)":d}).style("stroke",function(a){return void 0==a[l]||void 0==a[p]?"rgb(170,170,170)":f})}}};c.prototype.preProcessData=function(){var b=this;return new Promise(function(a,c){Promise.all(b.data.map(function(a){return a.ready})).then(function(){var g=b.optionValue("cols"),e=b.optionValue("xVal"),d=g.map(function(a){return b.data[u.array.indexOf(b.data,
function(b){return b.id==a})]});2>d.length?c("Scatter plot needs two columns of data, but only received "+g.length):(g=b.optionValue("mergeCols"),b[h]=g(e,d),a())})})};return c}();B("vs.ui.plugins.canvas.ManhattanPlot",vs.ui.plugins.canvas.f);vs.ui.plugins.canvas.f.prototype.endDraw=vs.ui.plugins.canvas.f.prototype.endDraw;vs.ui.plugins.canvas.f.prototype.getItemsAt=vs.ui.plugins.canvas.f.prototype.getItemsAt;vs.ui.plugins.canvas.f.prototype.highlightItem=vs.ui.plugins.canvas.f.prototype.highlightItem;B("vs.ui.plugins.canvas.ScatterPlot",vs.ui.plugins.canvas.a);vs.ui.plugins.canvas.a.prototype.endDraw=vs.ui.plugins.canvas.a.prototype.endDraw;vs.ui.plugins.canvas.a.prototype.getItemsAt=vs.ui.plugins.canvas.a.prototype.getItemsAt;vs.ui.plugins.canvas.a.prototype.highlightItem=vs.ui.plugins.canvas.a.prototype.highlightItem;vs.ui.plugins.canvas.a.prototype.preProcessData=vs.ui.plugins.canvas.a.prototype.preProcessData;B("vs.ui.plugins.svg.Heatmap",vs.ui.plugins.svg.c);vs.ui.plugins.svg.c.prototype.endDraw=vs.ui.plugins.svg.c.prototype.endDraw;vs.ui.plugins.svg.c.prototype.highlightItem=vs.ui.plugins.svg.c.prototype.highlightItem;vs.ui.plugins.svg.c.prototype.unhighlightItem=vs.ui.plugins.svg.c.prototype.unhighlightItem;vs.ui.plugins.svg.c.prototype.preProcessData=vs.ui.plugins.svg.c.prototype.preProcessData;B("vs.ui.plugins.svg.ManhattanPlot",F);F.prototype.endDraw=F.prototype.endDraw;F.prototype.highlightItem=F.prototype.highlightItem;F.prototype.unhighlightItem=F.prototype.unhighlightItem;B("vs.ui.plugins.svg.ScatterPlot",vs.ui.plugins.svg.a);vs.ui.plugins.svg.a.prototype.endDraw=vs.ui.plugins.svg.a.prototype.endDraw;vs.ui.plugins.svg.a.prototype.highlightItem=vs.ui.plugins.svg.a.prototype.highlightItem;vs.ui.plugins.svg.a.prototype.unhighlightItem=vs.ui.plugins.svg.a.prototype.unhighlightItem;vs.ui.plugins.svg.a.prototype.preProcessData=vs.ui.plugins.svg.a.prototype.preProcessData;}).call(this); //@ sourceMappingURL=vs.ui.plugins.min.js.map
