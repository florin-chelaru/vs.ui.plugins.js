(function(){/*
 vs.ui.plugins.js
 Copyright (c) 2015 Florin Chelaru
 License: MIT

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
 permit persons to whom the Software is furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
 Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
 WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
'use strict';var w=this;Math.random();function x(a,d){var b=a.split("."),c=w;b[0]in c||!c.execScript||c.execScript("var "+b[0]);for(var m;b.length&&(m=b.shift());)b.length||void 0===d?c[m]?c=c[m]:c=c[m]={}:c[m]=d}function y(a,d){function b(){}b.prototype=d.prototype;a.i=d.prototype;a.prototype=new b;a.prototype.constructor=a;a.g=function(b,a,t){for(var q=Array(arguments.length-2),e=2;e<arguments.length;e++)q[e-2]=arguments[e];return d.prototype[a].apply(b,q)}};var vs={ui:{}};u.extend(vs,this.vs);u.extend(vs.ui,this.vs.ui);vs.ui.plugins={};vs.ui.plugins.canvas={};
vs.ui.plugins.canvas.a=function(){function a(){vs.ui.canvas.CanvasVis.apply(this,arguments);this[d]=null}var d=Symbol("_quadTree");y(a,vs.ui.canvas.CanvasVis);a.f=u.extend({},vs.ui.canvas.CanvasVis.Settings,{rows:vs.ui.Setting.PredefinedSettings.rows,vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:new vs.ui.Setting({key:"xBoundaries",type:"vs.models.Boundaries",defaultValue:vs.ui.Setting.rowBoundaries,label:"x boundaries",template:"_boundaries.html"}),yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,
xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,
selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness,colorOptions:new vs.ui.Setting({key:"colorOptions",type:vs.ui.Setting.Type.ARRAY,defaultValue:["blue","red"]})});Object.defineProperties(a.prototype,{settings:{get:function(){return a.f}}});a.prototype.beginDraw=function(){var b=this,a=arguments;return new Promise(function(m){vs.ui.canvas.CanvasVis.prototype.beginDraw.apply(b,a).then(function(){var a=b.data;if(b.data.isReady&&a.nrows){var c=b.optionValue("margins"),e=b.optionValue("xScale"),
f=b.optionValue("yScale"),h=b.optionValue("cols"),n=b.optionValue("rows")[0],r=b.optionValue("vals"),k=b.optionValue("itemRatio"),p=b.optionValue("width"),g=b.optionValue("height"),l=Math.min(Math.abs(p),Math.abs(g))*k,v=new u.QuadTree(c.left,c.top,p-c.left-c.right,g-c.top-c.bottom,k,10),A=vs.models.Transformer.scale(e,f).translate({x:c.left,y:c.top});a.asDataRowArray().forEach(function(b){var a={x:parseFloat(b.info(n)),y:b.val(h[0],r)},a=A.calc(a);v.insert(a.x-l,a.y-l,2*l,2*l,b)});b[d]=v}m()})})};
a.prototype.endDraw=function(){var b=this,a=arguments;return(new Promise(function(a){var c=b.data;if(b.data.isReady&&c.nrows){var d=b.optionValue("colorOptions"),e=b.optionValue("margins"),f=b.optionValue("xScale"),h=b.optionValue("yScale"),n=b.optionValue("cols"),r=b.optionValue("rows")[0],k=b.optionValue("vals");b.optionValue("itemRatio");var p=b.optionValue("width"),g=b.optionValue("height");Math.min(Math.abs(p),Math.abs(g));b.optionValue("fill");b.optionValue("stroke");p=b.optionValue("strokeThickness");
g=b.pendingCanvas[0].getContext("2d");e=vs.models.Transformer.scale(f,h).translate({x:e.left,y:e.top});c=c.asDataRowArray();for(f=0;f<d.length;f++){h=e.calc({x:parseFloat(c[0].info(r)),y:c[0].val(n[f],k)});g.lineWidth=p;g.strokeStyle=d[f];g.beginPath();g.moveTo(h.x,h.y);for(h=0;h<c.length;h++){var l=e.calc({x:parseFloat(c[h].info(r)),y:c[h].val(n[f],k)});g.lineTo(l.x,l.y);g.stroke();g.closePath();g.beginPath();g.moveTo(l.x,l.y)}g.closePath()}}a()})).then(function(){return vs.ui.canvas.CanvasVis.prototype.endDraw.apply(b,
a)})};a.prototype.getItemsAt=function(b,a){return this[d]?this[d].collisions(b,a).map(function(b){return b.value}):[]};a.prototype.highlightItem=function(b,a){var m=this.optionValue("margins"),d=this.optionValue("xScale"),q=this.optionValue("yScale"),e=this.optionValue("cols"),f=this.optionValue("rows")[0],h=this.optionValue("vals"),n=this.optionValue("itemRatio"),r=this.optionValue("width"),k=this.optionValue("height"),n=Math.min(Math.abs(r),Math.abs(k))*n,r=this.optionValue("selectFill"),k=this.optionValue("selectStroke"),
p=this.optionValue("selectStrokeThickness"),m=vs.models.Transformer.scale(d,q).translate({x:m.left,y:m.top}).calc({x:parseFloat(a.info(f)),y:a.val(e[0],h)}),d=b.getContext("2d");d.font="15px Arial";d.fillText(a.info(f)+", "+a.val(e[0],h),30,15);vs.ui.canvas.CanvasVis.circle(d,m.x,m.y,n,r,k,p)};return a}();vs.ui.plugins.canvas.b=function(){function a(){vs.ui.canvas.CanvasVis.apply(this,arguments);this[d]=null}var d=Symbol("_quadTree");y(a,vs.ui.canvas.CanvasVis);a.f=u.extend({},vs.ui.canvas.CanvasVis.Settings,{rows:vs.ui.Setting.PredefinedSettings.rows,vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:new vs.ui.Setting({key:"xBoundaries",type:"vs.models.Boundaries",defaultValue:vs.ui.Setting.rowBoundaries,label:"x boundaries",template:"_boundaries.html"}),yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,
xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,
selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(a.prototype,{settings:{get:function(){return a.f}}});a.prototype.beginDraw=function(){var b=this,a=arguments;return new Promise(function(m){vs.ui.canvas.CanvasVis.prototype.beginDraw.apply(b,a).then(function(){var a=b.data;if(b.data.isReady&&a.nrows){var c=b.optionValue("margins"),e=b.optionValue("xScale"),f=b.optionValue("yScale"),h=b.optionValue("cols"),n=b.optionValue("rows")[0],r=b.optionValue("vals"),
k=b.optionValue("itemRatio"),p=b.optionValue("width"),g=b.optionValue("height"),l=Math.min(Math.abs(p),Math.abs(g))*k,v=new u.QuadTree(c.left,c.top,p-c.left-c.right,g-c.top-c.bottom,k,10),A=vs.models.Transformer.scale(e,f).translate({x:c.left,y:c.top});a.asDataRowArray().forEach(function(b){var a={x:parseFloat(b.info(n)),y:b.val(h[0],r)},a=A.calc(a);v.insert(a.x-l,a.y-l,2*l,2*l,b)});b[d]=v}m()})})};a.prototype.endDraw=function(){var b=this,a=arguments;return(new Promise(function(a,c){var d=b.data;
if(b.data.isReady)if(d.nrows){var e=b.optionValue("margins"),f=b.optionValue("xScale"),h=b.optionValue("yScale"),n=b.optionValue("cols"),r=b.optionValue("rows")[0],k=b.optionValue("vals"),p=b.optionValue("itemRatio"),g=b.optionValue("width"),l=b.optionValue("height"),v=Math.min(Math.abs(g),Math.abs(l))*p,A=b.optionValue("fill"),D=b.optionValue("stroke"),F=b.optionValue("strokeThickness"),G=b.pendingCanvas[0].getContext("2d"),H=vs.models.Transformer.scale(f,h).translate({x:e.left,y:e.top}),d=d.asDataRowArray();
u.async.each(d,function(a){return new Promise(function(b){setTimeout(function(){var c=H.calc({x:parseFloat(a.info(r)),y:a.val(n[0],k)});vs.ui.canvas.CanvasVis.circle(G,c.x,c.y,v,A,D,F);b()},0)})}).then(a,c)}else a();else a()})).then(function(){return vs.ui.canvas.CanvasVis.prototype.endDraw.apply(b,a)})};a.prototype.getItemsAt=function(a,c){return this[d]?this[d].collisions(a,c).map(function(a){return a.value}):[]};a.prototype.highlightItem=function(a,c){var m=this.optionValue("margins"),d=this.optionValue("xScale"),
q=this.optionValue("yScale"),e=this.optionValue("cols"),f=this.optionValue("rows")[0],h=this.optionValue("vals"),n=this.optionValue("itemRatio"),r=this.optionValue("width"),k=this.optionValue("height"),n=Math.min(Math.abs(r),Math.abs(k))*n,r=this.optionValue("selectFill"),k=this.optionValue("selectStroke"),p=this.optionValue("selectStrokeThickness"),m=vs.models.Transformer.scale(d,q).translate({x:m.left,y:m.top}).calc({x:parseFloat(c.info(f)),y:c.val(e[0],h)}),d=a.getContext("2d");vs.ui.canvas.CanvasVis.circle(d,
m.x,m.y,n,r,k,p)};return a}();vs.ui.plugins.svg={};function z(){vs.ui.svg.SvgVis.apply(this,arguments);this.publicField=20}y(z,vs.ui.svg.SvgVis);
z.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){var c=a.data;if(c.nrows&&c.ncols){var c=d3.select(a.$element[0]).select("svg"),d=c.select(".viewport");d.empty()&&(d=c.append("g").attr("class","viewport"));d.append("circle").attr("cx",50).attr("cy",50).attr("r",20).attr("fill","#fe5621").style("stroke","#000000").style("stroke-width",5)}b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,d)})};function B(){vs.ui.svg.SvgVis.apply(this,arguments)}y(B,vs.ui.svg.SvgVis);
var C=u.extend({},vs.ui.VisHandler.Settings,{rows:vs.ui.Setting.PredefinedSettings.rows,vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:new vs.ui.Setting({key:"xBoundaries",type:"vs.models.Boundaries",defaultValue:vs.ui.Setting.rowBoundaries,label:"x boundaries",template:"_boundaries.html"}),yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",
type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(B.prototype,{settings:{get:function(){return C}}});
B.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){var c=a.data;if(c.nrows){var d=a.optionValue("margins"),t=a.optionValue("xScale"),q=a.optionValue("yScale"),e=a.optionValue("cols"),f=a.optionValue("rows")[0],h=a.optionValue("vals"),n=a.optionValue("fill"),r=a.optionValue("stroke"),k=a.optionValue("strokeThickness"),p=a.optionValue("itemRatio"),g=a.optionValue("width"),l=a.optionValue("height"),p=Math.min(Math.abs(g),Math.abs(l))*p,l=d3.select(a.$element[0]).select("svg"),
g=l.select(".viewport");g.empty()&&(g=l.append("g").attr("class","viewport"));g.attr("transform","translate("+d.left+", "+d.top+")");c=c.asDataRowArray();c=g.selectAll("circle").data(c,vs.models.DataSource.key);c.enter().append("circle").attr("class","vs-item");c.attr("r",p).attr("cx",function(a){return t(parseFloat(a.info(f)))}).attr("cy",function(a){return q(a.val(e[0],h))}).attr("fill",n).style("stroke",r).style("stroke-width",k);c.append("path").attr("class","DEBUG");c.exit().remove()}b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,
d)})};B.prototype.highlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("selectFill"),m=this.optionValue("selectStroke"),t=this.optionValue("selectStrokeThickness"),b=b.selectAll(".vs-item").data([d],vs.models.DataSource.key);b.style("stroke",m).style("stroke-width",t).style("fill",c);$(b[0]).appendTo($(a))};
B.prototype.unhighlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("fill"),m=this.optionValue("stroke"),t=this.optionValue("strokeThickness");b.selectAll(".vs-item").data([d],vs.models.DataSource.key).style("stroke",m).style("stroke-width",t).style("fill",c)};function E(){vs.ui.svg.SvgVis.apply(this,arguments)}y(E,vs.ui.svg.SvgVis);
var I=u.extend({},vs.ui.VisHandler.Settings,{rows:vs.ui.Setting.PredefinedSettings.rows,vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:new vs.ui.Setting({key:"xBoundaries",type:"vs.models.Boundaries",defaultValue:vs.ui.Setting.rowBoundaries,label:"x boundaries",template:"_boundaries.html"}),yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",
type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness,colorOptions:new vs.ui.Setting({key:"colorOptions",type:vs.ui.Setting.Type.ARRAY,
defaultValue:["blue","red"]}),interpolation:new vs.ui.Setting({key:"interpolation",type:vs.ui.Setting.Type.STRING,defaultValue:"linear"})});Object.defineProperties(E.prototype,{settings:{get:function(){return I}}});
E.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){function c(a){return d3.svg.line().x(function(a){return e(parseFloat(a.info(n)))}).y(function(b){return f(b.val(h[a],r))}).interpolate(A)}var d=a.data,t=a.optionValue("colorOptions"),q=a.optionValue("margins"),e=a.optionValue("xScale"),f=a.optionValue("yScale"),h=a.optionValue("cols"),n=a.optionValue("rows")[0],r=a.optionValue("vals");a.optionValue("fill");var k=a.optionValue("stroke"),p=a.optionValue("strokeThickness"),
g=a.optionValue("itemRatio"),l=a.optionValue("width"),v=a.optionValue("height"),l=Math.min(Math.abs(l),Math.abs(v))*g,v=d3.select(a.$element[0]).select("svg"),A=a.optionValue("interpolation"),g=v.select(".viewport");g.empty()&&(g=v.append("g").attr("class","viewport"));g.attr("transform","translate("+q.left+", "+q.top+")");d=d.asDataRowArray();q=g.selectAll("circle").data(d,vs.models.DataSource.key);q.enter().append("circle").attr("class","vs-item");q.attr("r",l).attr("cx",function(a){return e(parseFloat(a.info(n)))}).attr("cy",
function(a){return f(a.val(h[0],r))}).attr("fill","none").style("stroke",k).style("opacity",0).style("stroke-width",p);k=g.selectAll("coords").data(d,vs.models.DataSource.key);k.enter().append("text").attr("class","coords");k.attr("x",9).attr("background","blue").attr("dy",".35em").attr("opacity",0);k=[];for(l=0;l<h.length;l++){var v=l.toString(),D="path";0!=l&&(D="path".concat(v));k[l]=g.selectAll(D).data([0]);k[l].enter().append("path");k[l].attr("d",c(l)(d)).attr("stroke",t[l]).attr("stroke-width",
p).attr("fill","none");k[l].exit().remove()}q.exit().remove();b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,d)})};
E.prototype.highlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("rows")[0],m=this.optionValue("cols"),t=this.optionValue("selectFill"),q=this.optionValue("selectStroke"),e=this.optionValue("selectStrokeThickness"),f=this.optionValue("vals");b.selectAll(".vs-item").data([d],vs.models.DataSource.key).style("opacity",1).style("stroke",q).style("stroke-width",e).style("fill",t);b.selectAll(".coords").data([d],vs.models.DataSource.key).text(d.info(c)+", "+d.val(m[0],f)).attr("opacity",1)};
E.prototype.unhighlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("fill"),m=this.optionValue("stroke"),t=this.optionValue("strokeThickness");b.selectAll(".vs-item").data([d],vs.models.DataSource.key).style("stroke",m).style("opacity",0).style("stroke-width",t).style("fill",c);b.selectAll(".coords").data([d],vs.models.DataSource.key).attr("opacity",0)};vs.ui.plugins.canvas.c=function(){function a(){vs.ui.canvas.CanvasVis.apply(this,arguments);this[d]=null}var d=Symbol("_quadTree");y(a,vs.ui.canvas.CanvasVis);a.f=u.extend({},vs.ui.canvas.CanvasVis.Settings,{vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,
itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(a.prototype,
{settings:{get:function(){return a.f}}});a.prototype.beginDraw=function(){var a=this,c=arguments;return new Promise(function(m){vs.ui.canvas.CanvasVis.prototype.beginDraw.apply(a,c).then(function(){var c=a.data;if(a.data.isReady&&c.nrows){var c=a.optionValue("margins"),q=a.optionValue("cols"),e=a.optionValue("vals"),f=a.optionValue("itemRatio"),h=a.optionValue("xScale"),n=a.optionValue("yScale"),r=a.optionValue("width"),k=a.optionValue("height"),p=Math.min(Math.abs(r),Math.abs(k))*f,g=q[0],l=q[1],
v=new u.QuadTree(c.left,c.top,r-c.left-c.right,k-c.top-c.bottom,f,10),A=vs.models.Transformer.scale(h,n).translate({x:c.left,y:c.top});a.data.asDataRowArray().forEach(function(a){var b={x:a.val(g,e),y:a.val(l,e)},b=A.calc(b);v.insert(b.x-p,b.y-p,2*p,2*p,a)});a[d]=v}m()})})};a.prototype.endDraw=function(){var a=this,c=arguments;return(new Promise(function(c,d){var q=a.data;if(a.data.isReady)if(q.nrows){var e=a.optionValue("margins"),f=a.optionValue("xScale"),h=a.optionValue("yScale"),n=a.optionValue("cols"),
r=a.optionValue("vals"),k=a.optionValue("itemRatio"),p=a.optionValue("width"),g=a.optionValue("height"),l=Math.min(Math.abs(p),Math.abs(g))*k,v=n[0],A=n[1],D=a.optionValue("fill"),F=a.optionValue("stroke"),G=a.optionValue("strokeThickness"),H=a.pendingCanvas[0].getContext("2d"),J=vs.models.Transformer.scale(f,h).translate({x:e.left,y:e.top}),q=q.asDataRowArray();u.async.each(q,function(a){return new Promise(function(b){setTimeout(function(){var c=J.calc({x:a.val(v,r),y:a.val(A,r)});vs.ui.canvas.CanvasVis.circle(H,
c.x,c.y,l,D,F,G);b()},0)})}).then(c,d)}else c();else c()})).then(function(){return vs.ui.canvas.CanvasVis.prototype.endDraw.apply(a,c)})};a.prototype.getItemsAt=function(a,c){return this[d]?this[d].collisions(a,c).map(function(a){return a.value}):[]};a.prototype.highlightItem=function(a,c){var d=this.optionValue("margins"),t=this.optionValue("xScale"),q=this.optionValue("yScale"),e=this.optionValue("cols"),f=this.optionValue("vals"),h=this.optionValue("itemRatio"),n=this.optionValue("width"),r=this.optionValue("height"),
k=this.optionValue("selectFill"),p=this.optionValue("selectStroke"),g=this.optionValue("selectStrokeThickness"),d=vs.models.Transformer.scale(t,q).translate({x:d.left,y:d.top}),h=Math.min(Math.abs(n),Math.abs(r))*h,n=e[1],e=d.calc({x:c.val(e[0],f),y:c.val(n,f)}),f=a.getContext("2d");vs.ui.canvas.CanvasVis.circle(f,e.x,e.y,h,k,p,g)};return a}();function K(){vs.ui.svg.SvgVis.apply(this,arguments)}y(K,vs.ui.svg.SvgVis);
var L=u.extend({},vs.ui.VisHandler.Settings,{vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,cols:vs.ui.Setting.PredefinedSettings.cols,fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,
selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(K.prototype,{settings:{get:function(){return L}}});
K.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){var c=a.data;if(c.nrows){var d=a.optionValue("margins"),t=a.optionValue("cols"),q=a.optionValue("vals"),e=a.optionValue("width"),f=a.optionValue("height"),h=a.optionValue("yBoundaries"),n=a.optionValue("fill");a.optionValue("stroke");a.optionValue("strokeThickness");var r=d3.scale.linear().domain([0,t.length]).range([0,e-d.left-d.right]),k=d3.scale.linear().domain([0,c.nrows]).range([0,f-d.top-d.bottom]),p=d3.scale.linear().domain([h.min,
h.max]).range(["#ffffff",n]),f=d3.select(a.$element[0]).select("svg"),e=f.select(".viewport");e.empty()&&(e=f.append("g").attr("class","viewport"));e.attr("transform","translate("+d.left+", "+d.top+")");c=c.asDataRowArray();c=e.selectAll("g").data(c,vs.models.DataSource.key);c.enter().append("g").attr("class","vs-item");c.attr("transform",function(a,b){return"translate(0,"+k(b)+")"}).each(function(a){var b=d3.select(this).selectAll("rect").data(t);b.enter().append("rect").attr("class","vs-cell");
b.attr("x",function(a,b){return r(b)}).attr("y",0).attr("width",r(1)).attr("height",k(1)).attr("fill",function(b){return p(a.val(b,q))})});c.exit().remove()}b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,d)})};
K.prototype.highlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("selectFill"),m=this.optionValue("selectStroke"),t=this.optionValue("selectStrokeThickness"),q=this.optionValue("vals"),e=this.optionValue("yBoundaries"),f=this.optionValue("margins"),h=this.optionValue("width"),n=this.optionValue("height"),r=d3.scale.linear().domain([0,d.data.nrows]).range([0,n-f.top-f.bottom]),k=d3.scale.linear().domain([e.min,e.max]).range(["#ffffff",c]),c=(n-f.top-f.bottom)/d.data.nrows,e=Math.max(c,
25),p=e/c,g=e-c,e=b.selectAll(".vs-item").data([d],vs.models.DataSource.key);e.each(function(){d3.select(this).selectAll(".vs-cell").attr("fill",function(a){return k(d.val(a,q))})});b.append("rect").attr("class","vs-item-border").attr("x",-t).attr("y",d.index*c-t-.5*g).attr("width",h-f.left-f.right+2*t).attr("height",g+c+2*t).style("stroke",m).style("stroke-width",t).style("fill","none");e.attr("transform",function(a){return"translate(0, "+(r(a.index)-.5*g)+") scale(1, "+p+")"});$(e[0]).appendTo($(a))};
K.prototype.unhighlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("fill"),m=this.optionValue("yBoundaries"),t=this.optionValue("vals"),q=this.optionValue("margins");this.optionValue("width");var e=this.optionValue("height"),f=d3.scale.linear().domain([0,d.data.nrows]).range([0,e-q.top-q.bottom]),h=d3.scale.linear().domain([m.min,m.max]).range(["#ffffff",c]);b.selectAll(".vs-item").data([d],vs.models.DataSource.key).each(function(){d3.select(this).selectAll(".vs-cell").attr("fill",function(a){return h(d.val(a,
t))})}).attr("transform",function(a){return"translate(0,"+f(a.index)+")"});b.selectAll(".vs-item-border").remove()};function M(){vs.ui.svg.SvgVis.apply(this,arguments)}y(M,vs.ui.svg.SvgVis);
var N=u.extend({},vs.ui.VisHandler.Settings,{vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,
stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(M.prototype,{settings:{get:function(){return N}}});
M.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){var c=a.data;if(c.nrows){var d=a.optionValue("margins"),t=a.optionValue("xScale"),q=a.optionValue("yScale"),e=a.optionValue("cols"),f=a.optionValue("vals"),h=a.optionValue("itemRatio"),n=a.optionValue("width"),r=a.optionValue("height"),k=a.optionValue("fill"),p=a.optionValue("stroke"),g=a.optionValue("strokeThickness"),h=Math.min(Math.abs(n),Math.abs(r))*h,l=e[0],v=e[1],n=d3.select(a.$element[0]).select("svg"),e=
n.select(".viewport");e.empty()&&(e=n.append("g").attr("class","viewport"));e.attr("transform","translate("+d.left+", "+d.top+")");c=c.asDataRowArray();c=e.selectAll("circle").data(c,vs.models.DataSource.key);c.enter().append("circle").attr("class","vs-item");c.attr("r",h).attr("cx",function(a){return t(a.val(l,f))}).attr("cy",function(a){return q(a.val(v,f))}).attr("fill",k).style("stroke",p).style("stroke-width",g);c.exit().remove()}b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,
d)})};M.prototype.highlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("selectFill"),m=this.optionValue("selectStroke"),t=this.optionValue("selectStrokeThickness"),b=b.selectAll(".vs-item").data([d],vs.models.DataSource.key);b.style("stroke",m).style("stroke-width",t).style("fill",c);$(b[0]).appendTo($(a))};
M.prototype.unhighlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("fill"),m=this.optionValue("stroke"),t=this.optionValue("strokeThickness");b.selectAll(".vs-item").data([d],vs.models.DataSource.key).style("stroke",m).style("stroke-width",t).style("fill",c)};x("vs.ui.plugins.canvas.Line",vs.ui.plugins.canvas.a);vs.ui.plugins.canvas.a.prototype.endDraw=vs.ui.plugins.canvas.a.prototype.endDraw;vs.ui.plugins.canvas.a.prototype.getItemsAt=vs.ui.plugins.canvas.a.prototype.getItemsAt;vs.ui.plugins.canvas.a.prototype.highlightItem=vs.ui.plugins.canvas.a.prototype.highlightItem;x("vs.ui.plugins.canvas.ManhattanPlot",vs.ui.plugins.canvas.b);vs.ui.plugins.canvas.b.prototype.endDraw=vs.ui.plugins.canvas.b.prototype.endDraw;vs.ui.plugins.canvas.b.prototype.getItemsAt=vs.ui.plugins.canvas.b.prototype.getItemsAt;vs.ui.plugins.canvas.b.prototype.highlightItem=vs.ui.plugins.canvas.b.prototype.highlightItem;x("vs.ui.plugins.canvas.ScatterPlot",vs.ui.plugins.canvas.c);vs.ui.plugins.canvas.c.prototype.endDraw=vs.ui.plugins.canvas.c.prototype.endDraw;vs.ui.plugins.canvas.c.prototype.getItemsAt=vs.ui.plugins.canvas.c.prototype.getItemsAt;vs.ui.plugins.canvas.c.prototype.highlightItem=vs.ui.plugins.canvas.c.prototype.highlightItem;x("vs.ui.plugins.svg.Demo",z);z.prototype.endDraw=z.prototype.endDraw;x("vs.ui.plugins.svg.Heatmap",K);K.prototype.endDraw=K.prototype.endDraw;K.prototype.highlightItem=K.prototype.highlightItem;K.prototype.unhighlightItem=K.prototype.unhighlightItem;x("vs.ui.plugins.svg.Line",E);E.prototype.endDraw=E.prototype.endDraw;E.prototype.highlightItem=E.prototype.highlightItem;E.prototype.unhighlightItem=E.prototype.unhighlightItem;x("vs.ui.plugins.svg.ManhattanPlot",B);B.prototype.endDraw=B.prototype.endDraw;B.prototype.highlightItem=B.prototype.highlightItem;B.prototype.unhighlightItem=B.prototype.unhighlightItem;x("vs.ui.plugins.svg.ScatterPlot",M);M.prototype.endDraw=M.prototype.endDraw;M.prototype.highlightItem=M.prototype.highlightItem;M.prototype.unhighlightItem=M.prototype.unhighlightItem;}).call(this); //@ sourceMappingURL=vs.ui.plugins.min.js.map
