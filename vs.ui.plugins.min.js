(function(){/*
 vs.ui.plugins.js
 Copyright (c) 2015 Florin Chelaru
 License: MIT

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
 permit persons to whom the Software is furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
 Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
 WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
'use strict';var z=this;Math.random();function A(a,d){var b=a.split("."),c=z;b[0]in c||!c.execScript||c.execScript("var "+b[0]);for(var f;b.length&&(f=b.shift());)b.length||void 0===d?c[f]?c=c[f]:c=c[f]={}:c[f]=d}function B(a,d){function b(){}b.prototype=d.prototype;a.g=d.prototype;a.prototype=new b;a.prototype.constructor=a;a.f=function(b,a,k){for(var m=Array(arguments.length-2),e=2;e<arguments.length;e++)m[e-2]=arguments[e];return d.prototype[a].apply(b,m)}};var vs={ui:{}};u.extend(vs,this.vs);u.extend(vs.ui,this.vs.ui);vs.ui.plugins={};vs.ui.plugins.canvas={};
function D(){function a(){vs.ui.canvas.CanvasVis.apply(this,arguments);this[d]=null}var d=Symbol("_quadTree");B(a,vs.ui.canvas.CanvasVis);a.c=u.extend({},vs.ui.canvas.CanvasVis.Settings,{rows:vs.ui.Setting.PredefinedSettings.rows,vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:new vs.ui.Setting({key:"xBoundaries",type:"vs.models.Boundaries",defaultValue:vs.ui.Setting.rowBoundaries,label:"x boundaries",template:"_boundaries.html"}),yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,
yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});
Object.defineProperties(a.prototype,{settings:{get:function(){return a.c}}});a.prototype.beginDraw=function(){var b=this,a=arguments;return new Promise(function(f){vs.ui.canvas.CanvasVis.prototype.beginDraw.apply(b,a).then(function(){var a=b.data;if(b.data.isReady&&a.nrows){var c=b.optionValue("margins"),e=b.optionValue("xScale"),g=b.optionValue("yScale"),l=b.optionValue("cols"),h=b.optionValue("rows")[0],q=b.optionValue("vals"),n=b.optionValue("itemRatio"),p=b.optionValue("width"),r=b.optionValue("height"),
t=Math.min(Math.abs(p),Math.abs(r))*n,v=new u.QuadTree(c.left,c.top,p-c.left-c.right,r-c.top-c.bottom,n,10),w=vs.models.Transformer.scale(e,g).translate({x:c.left,y:c.top});a.asDataRowArray().forEach(function(b){var a={x:parseFloat(b.info(h)),y:b.val(l[0],q)},a=w.calc(a);v.insert(a.x-t,a.y-t,2*t,2*t,b)});b[d]=v}f()})})};a.prototype.endDraw=function(){var b=this;return new Promise(function(a){var f=b.data;if(b.data.isReady)if(f.nrows){a=b.optionValue("margins");var k=b.optionValue("xScale"),d=b.optionValue("yScale");
b.optionValue("cols");b.optionValue("rows");b.optionValue("vals");b.optionValue("itemRatio");var e=b.optionValue("width"),g=b.optionValue("height");Math.min(Math.abs(e),Math.abs(g));b.optionValue("fill");b.optionValue("stroke");b.optionValue("strokeThickness");b.pendingCanvas[0].getContext("2d");vs.models.Transformer.scale(k,d).translate({x:a.left,y:a.top});f.asDataRowArray()}else a();else a()})}};vs.ui.plugins.canvas.a=function(){function a(){vs.ui.canvas.CanvasVis.apply(this,arguments);this[d]=null}var d=Symbol("_quadTree");B(a,vs.ui.canvas.CanvasVis);a.c=u.extend({},vs.ui.canvas.CanvasVis.Settings,{rows:vs.ui.Setting.PredefinedSettings.rows,vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:new vs.ui.Setting({key:"xBoundaries",type:"vs.models.Boundaries",defaultValue:vs.ui.Setting.rowBoundaries,label:"x boundaries",template:"_boundaries.html"}),yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,
xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,
selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(a.prototype,{settings:{get:function(){return a.c}}});a.prototype.beginDraw=function(){var b=this,a=arguments;return new Promise(function(f){vs.ui.canvas.CanvasVis.prototype.beginDraw.apply(b,a).then(function(){var a=b.data;if(b.data.isReady&&a.nrows){var c=b.optionValue("margins"),e=b.optionValue("xScale"),g=b.optionValue("yScale"),l=b.optionValue("cols"),h=b.optionValue("rows")[0],q=b.optionValue("vals"),
n=b.optionValue("itemRatio"),p=b.optionValue("width"),r=b.optionValue("height"),t=Math.min(Math.abs(p),Math.abs(r))*n,v=new u.QuadTree(c.left,c.top,p-c.left-c.right,r-c.top-c.bottom,n,10),w=vs.models.Transformer.scale(e,g).translate({x:c.left,y:c.top});a.asDataRowArray().forEach(function(b){var a={x:parseFloat(b.info(h)),y:b.val(l[0],q)},a=w.calc(a);v.insert(a.x-t,a.y-t,2*t,2*t,b)});b[d]=v}f()})})};a.prototype.endDraw=function(){var b=this,a=arguments;return(new Promise(function(a,c){var d=b.data;
if(b.data.isReady)if(d.nrows){var e=b.optionValue("margins"),g=b.optionValue("xScale"),l=b.optionValue("yScale"),h=b.optionValue("cols"),q=b.optionValue("rows")[0],n=b.optionValue("vals"),p=b.optionValue("itemRatio"),r=b.optionValue("width"),t=b.optionValue("height"),v=Math.min(Math.abs(r),Math.abs(t))*p,w=b.optionValue("fill"),C=b.optionValue("stroke"),y=b.optionValue("strokeThickness"),x=b.pendingCanvas[0].getContext("2d"),I=vs.models.Transformer.scale(g,l).translate({x:e.left,y:e.top}),d=d.asDataRowArray();
u.async.each(d,function(a){return new Promise(function(b){setTimeout(function(){var c=I.calc({x:parseFloat(a.info(q)),y:a.val(h[0],n)});vs.ui.canvas.CanvasVis.circle(x,c.x,c.y,v,w,C,y);b()},0)})}).then(a,c)}else a();else a()})).then(function(){return vs.ui.canvas.CanvasVis.prototype.endDraw.apply(b,a)})};a.prototype.getItemsAt=function(a,c){return this[d]?this[d].collisions(a,c).map(function(a){return a.value}):[]};a.prototype.highlightItem=function(a,c){var f=this.optionValue("margins"),d=this.optionValue("xScale"),
m=this.optionValue("yScale"),e=this.optionValue("cols"),g=this.optionValue("rows")[0],l=this.optionValue("vals"),h=this.optionValue("itemRatio"),q=this.optionValue("width"),n=this.optionValue("height"),h=Math.min(Math.abs(q),Math.abs(n))*h,q=this.optionValue("selectFill"),n=this.optionValue("selectStroke"),p=this.optionValue("selectStrokeThickness"),f=vs.models.Transformer.scale(d,m).translate({x:f.left,y:f.top}).calc({x:parseFloat(c.info(g)),y:c.val(e[0],l)}),d=a.getContext("2d");vs.ui.canvas.CanvasVis.circle(d,
f.x,f.y,h,q,n,p)};return a}();vs.ui.plugins.svg={};function E(){vs.ui.svg.SvgVis.apply(this,arguments);this.publicField=20}B(E,vs.ui.svg.SvgVis);
E.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){var c=a.data;if(c.nrows&&c.ncols){var c=d3.select(a.$element[0]).select("svg"),f=c.select(".viewport");f.empty()&&(f=c.append("g").attr("class","viewport"));f.append("circle").attr("cx",50).attr("cy",50).attr("r",20).attr("fill","#fe5621").style("stroke","#000000").style("stroke-width",5)}b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,d)})};function F(){vs.ui.svg.SvgVis.apply(this,arguments)}B(F,vs.ui.svg.SvgVis);
var G=u.extend({},vs.ui.VisHandler.Settings,{rows:vs.ui.Setting.PredefinedSettings.rows,vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:new vs.ui.Setting({key:"xBoundaries",type:"vs.models.Boundaries",defaultValue:vs.ui.Setting.rowBoundaries,label:"x boundaries",template:"_boundaries.html"}),yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",
type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(F.prototype,{settings:{get:function(){return G}}});
F.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){var c=a.data;if(c.nrows){var f=a.optionValue("margins"),d=a.optionValue("xScale"),m=a.optionValue("yScale"),e=a.optionValue("cols"),g=a.optionValue("rows")[0],l=a.optionValue("vals"),h=a.optionValue("fill"),q=a.optionValue("stroke"),n=a.optionValue("strokeThickness"),p=a.optionValue("itemRatio"),r=a.optionValue("width"),t=a.optionValue("height"),p=Math.min(Math.abs(r),Math.abs(t))*p,t=d3.select(a.$element[0]).select("svg"),
r=t.select(".viewport");r.empty()&&(r=t.append("g").attr("class","viewport"));r.attr("transform","translate("+f.left+", "+f.top+")");c=c.asDataRowArray();c=r.selectAll("circle").data(c,vs.models.DataSource.key);c.enter().append("circle").attr("class","vs-item");c.attr("r",p).attr("cx",function(a){return d(parseFloat(a.info(g)))}).attr("cy",function(a){return m(a.val(e[0],l))}).attr("fill",h).style("stroke",q).style("stroke-width",n);c.exit().remove()}b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,
d)})};F.prototype.highlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("selectFill"),f=this.optionValue("selectStroke"),k=this.optionValue("selectStrokeThickness"),b=b.selectAll(".vs-item").data([d],vs.models.DataSource.key);b.style("stroke",f).style("stroke-width",k).style("fill",c);$(b[0]).appendTo($(a))};
F.prototype.unhighlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("fill"),f=this.optionValue("stroke"),k=this.optionValue("strokeThickness");b.selectAll(".vs-item").data([d],vs.models.DataSource.key).style("stroke",f).style("stroke-width",k).style("fill",c)};function H(){vs.ui.svg.SvgVis.apply(this,arguments)}B(H,vs.ui.svg.SvgVis);
var J=u.extend({},vs.ui.VisHandler.Settings,{rows:vs.ui.Setting.PredefinedSettings.rows,vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:new vs.ui.Setting({key:"xBoundaries",type:"vs.models.Boundaries",defaultValue:vs.ui.Setting.rowBoundaries,label:"x boundaries",template:"_boundaries.html"}),yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",
type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(H.prototype,{settings:{get:function(){return J}}});
H.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){function c(a){return d3.svg.line().x(function(a){return g(parseFloat(a.info(q)))}).y(function(b){return l(b.val(h[a],n))}).interpolate("linear")}var f=["blue","red"],d=["tumor","healthy"],m=a.data,e=a.optionValue("margins"),g=a.optionValue("xScale"),l=a.optionValue("yScale"),h=a.optionValue("cols"),q=a.optionValue("rows")[0],n=a.optionValue("vals");a.optionValue("fill");a.optionValue("stroke");var p=a.optionValue("strokeThickness");
a.optionValue("itemRatio");var r=a.optionValue("width"),t=a.optionValue("height");Math.min(Math.abs(r),Math.abs(t));var v=d3.select(a.$element[0]).select("svg"),w=v.select(".viewport");w.empty()&&(w=v.append("g").attr("class","viewport"));w.attr("transform","translate("+e.left+", "+e.top+")");var C=m.asDataRowArray(),m=w.selectAll("path").data([0]),e=w.selectAll("path2").data([0]),v=w.selectAll("g1").data([0]),y=w.selectAll("G1").data([0]),x=w.selectAll("G2").data([0]);y.enter().append("g").attr("class",
"focus").style("display","none");y.append("circle").attr("r",4.5).attr("fill","blue").attr("stroke: #9bffa9");y.append("text").attr("x",9).attr("background","black").attr("dy",".35em");x.enter().append("g").attr("class","focus").style("display","none");x.append("circle").attr("r",4.5).attr("fill","red").attr("stroke: #9bffa9");x.append("rect").attr();x.append("text").attr("x",9).attr("background","black").attr("dy",".35em");m.enter().append("path").attr("stroke",f[0]).attr("stroke-width",p).attr("id",
"tag"+d[0]).attr("fill","none");m.attr("d",c(0)(C));e.enter().append("path").attr("stroke",f[1]).attr("stroke-width",p).attr("id","tag"+d[1]).attr("fill","none");e.attr("d",c(1)(C));v.enter().append("rect").data(C);v.attr("fill","none").attr("pointer-events","all").attr("width",r).attr("height",t).on("mouseover",function(){y.style("display",null);x.style("display",null)}).on("mouseout",function(){y.style("display","none");x.style("display","none")}).on("mousemove",function(){var a=g.invert(d3.mouse(this)[0]),
b=C.map(function(a){return a.val(h[0],n)}),c=C.map(function(a){return a.val(h[1],n)});55E4<a?(y.select("text").attr("x",-100),x.select("text").attr("x",-100)):(y.select("text").attr("x",9),x.select("text").attr("x",9));var f=C.map(function(a){return parseFloat(a.info(q))}),d=d3.bisectLeft(f,a),e=f[d-1],k=f[d],k=a-e>k-a?k:e;console.log(d);e=k==e?d-1:d;y.attr("transform","translate("+g(k)+","+l(b[e])+")");y.select("text").text(k+", "+b[e]);d3.bisectLeft(f,a);b=f[d-1];f=f[d];a=a-b>f-a?f:b;x.attr("transform",
"translate("+g(a)+","+l(c[e])+")");x.select("text").text(a+", "+c[e])});m.exit().remove();e.exit().remove();y.exit().remove();x.exit().remove();v.exit().remove();b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,d)})};vs.ui.plugins.canvas.b=function(){function a(){vs.ui.canvas.CanvasVis.apply(this,arguments);this[d]=null}var d=Symbol("_quadTree");B(a,vs.ui.canvas.CanvasVis);a.c=u.extend({},vs.ui.canvas.CanvasVis.Settings,{vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,
itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(a.prototype,
{settings:{get:function(){return a.c}}});a.prototype.beginDraw=function(){var a=this,c=arguments;return new Promise(function(f){vs.ui.canvas.CanvasVis.prototype.beginDraw.apply(a,c).then(function(){var c=a.data;if(a.data.isReady&&c.nrows){var c=a.optionValue("margins"),m=a.optionValue("cols"),e=a.optionValue("vals"),g=a.optionValue("itemRatio"),l=a.optionValue("xScale"),h=a.optionValue("yScale"),q=a.optionValue("width"),n=a.optionValue("height"),p=Math.min(Math.abs(q),Math.abs(n))*g,r=m[0],t=m[1],
v=new u.QuadTree(c.left,c.top,q-c.left-c.right,n-c.top-c.bottom,g,10),w=vs.models.Transformer.scale(l,h).translate({x:c.left,y:c.top});a.data.asDataRowArray().forEach(function(a){var b={x:a.val(r,e),y:a.val(t,e)},b=w.calc(b);v.insert(b.x-p,b.y-p,2*p,2*p,a)});a[d]=v}f()})})};a.prototype.endDraw=function(){var a=this,c=arguments;return(new Promise(function(c,d){var m=a.data;if(a.data.isReady)if(m.nrows){var e=a.optionValue("margins"),g=a.optionValue("xScale"),l=a.optionValue("yScale"),h=a.optionValue("cols"),
q=a.optionValue("vals"),n=a.optionValue("itemRatio"),p=a.optionValue("width"),r=a.optionValue("height"),t=Math.min(Math.abs(p),Math.abs(r))*n,v=h[0],w=h[1],C=a.optionValue("fill"),y=a.optionValue("stroke"),x=a.optionValue("strokeThickness"),I=a.pendingCanvas[0].getContext("2d"),K=vs.models.Transformer.scale(g,l).translate({x:e.left,y:e.top}),m=m.asDataRowArray();u.async.each(m,function(a){return new Promise(function(b){setTimeout(function(){var c=K.calc({x:a.val(v,q),y:a.val(w,q)});vs.ui.canvas.CanvasVis.circle(I,
c.x,c.y,t,C,y,x);b()},0)})}).then(c,d)}else c();else c()})).then(function(){return vs.ui.canvas.CanvasVis.prototype.endDraw.apply(a,c)})};a.prototype.getItemsAt=function(a,c){return this[d]?this[d].collisions(a,c).map(function(a){return a.value}):[]};a.prototype.highlightItem=function(a,c){var d=this.optionValue("margins"),k=this.optionValue("xScale"),m=this.optionValue("yScale"),e=this.optionValue("cols"),g=this.optionValue("vals"),l=this.optionValue("itemRatio"),h=this.optionValue("width"),q=this.optionValue("height"),
n=this.optionValue("selectFill"),p=this.optionValue("selectStroke"),r=this.optionValue("selectStrokeThickness"),d=vs.models.Transformer.scale(k,m).translate({x:d.left,y:d.top}),l=Math.min(Math.abs(h),Math.abs(q))*l,h=e[1],e=d.calc({x:c.val(e[0],g),y:c.val(h,g)}),g=a.getContext("2d");vs.ui.canvas.CanvasVis.circle(g,e.x,e.y,l,n,p,r)};return a}();function L(){vs.ui.svg.SvgVis.apply(this,arguments)}B(L,vs.ui.svg.SvgVis);
var M=u.extend({},vs.ui.VisHandler.Settings,{vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,cols:vs.ui.Setting.PredefinedSettings.cols,fill:vs.ui.Setting.PredefinedSettings.fill,stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,
selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(L.prototype,{settings:{get:function(){return M}}});
L.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){var c=a.data;if(c.nrows){var d=a.optionValue("margins"),k=a.optionValue("cols"),m=a.optionValue("vals"),e=a.optionValue("width"),g=a.optionValue("height"),l=a.optionValue("yBoundaries"),h=a.optionValue("fill");a.optionValue("stroke");a.optionValue("strokeThickness");var q=d3.scale.linear().domain([0,k.length]).range([0,e-d.left-d.right]),n=d3.scale.linear().domain([0,c.nrows]).range([0,g-d.top-d.bottom]),p=d3.scale.linear().domain([l.min,
l.max]).range(["#ffffff",h]),g=d3.select(a.$element[0]).select("svg"),e=g.select(".viewport");e.empty()&&(e=g.append("g").attr("class","viewport"));e.attr("transform","translate("+d.left+", "+d.top+")");c=c.asDataRowArray();c=e.selectAll("g").data(c,vs.models.DataSource.key);c.enter().append("g").attr("class","vs-item");c.attr("transform",function(a,b){return"translate(0,"+n(b)+")"}).each(function(a){var b=d3.select(this).selectAll("rect").data(k);b.enter().append("rect").attr("class","vs-cell");
b.attr("x",function(a,b){return q(b)}).attr("y",0).attr("width",q(1)).attr("height",n(1)).attr("fill",function(b){return p(a.val(b,m))})});c.exit().remove()}b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,d)})};
L.prototype.highlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("selectFill"),f=this.optionValue("selectStroke"),k=this.optionValue("selectStrokeThickness"),m=this.optionValue("vals"),e=this.optionValue("yBoundaries"),g=this.optionValue("margins"),l=this.optionValue("width"),h=this.optionValue("height"),q=d3.scale.linear().domain([0,d.data.nrows]).range([0,h-g.top-g.bottom]),n=d3.scale.linear().domain([e.min,e.max]).range(["#ffffff",c]),c=(h-g.top-g.bottom)/d.data.nrows,e=Math.max(c,
25),p=e/c,r=e-c,e=b.selectAll(".vs-item").data([d],vs.models.DataSource.key);e.each(function(){d3.select(this).selectAll(".vs-cell").attr("fill",function(a){return n(d.val(a,m))})});b.append("rect").attr("class","vs-item-border").attr("x",-k).attr("y",d.index*c-k-.5*r).attr("width",l-g.left-g.right+2*k).attr("height",r+c+2*k).style("stroke",f).style("stroke-width",k).style("fill","none");e.attr("transform",function(a){return"translate(0, "+(q(a.index)-.5*r)+") scale(1, "+p+")"});$(e[0]).appendTo($(a))};
L.prototype.unhighlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("fill"),f=this.optionValue("yBoundaries"),k=this.optionValue("vals"),m=this.optionValue("margins");this.optionValue("width");var e=this.optionValue("height"),g=d3.scale.linear().domain([0,d.data.nrows]).range([0,e-m.top-m.bottom]),l=d3.scale.linear().domain([f.min,f.max]).range(["#ffffff",c]);b.selectAll(".vs-item").data([d],vs.models.DataSource.key).each(function(){d3.select(this).selectAll(".vs-cell").attr("fill",function(a){return l(d.val(a,
k))})}).attr("transform",function(a){return"translate(0,"+g(a.index)+")"});b.selectAll(".vs-item-border").remove()};function N(){vs.ui.svg.SvgVis.apply(this,arguments)}B(N,vs.ui.svg.SvgVis);
var O=u.extend({},vs.ui.VisHandler.Settings,{vals:vs.ui.Setting.PredefinedSettings.vals,xBoundaries:vs.ui.Setting.PredefinedSettings.xBoundaries,yBoundaries:vs.ui.Setting.PredefinedSettings.yBoundaries,xScale:vs.ui.Setting.PredefinedSettings.xScale,yScale:vs.ui.Setting.PredefinedSettings.yScale,cols:vs.ui.Setting.PredefinedSettings.cols,itemRatio:new vs.ui.Setting({key:"itemRatio",type:vs.ui.Setting.Type.NUMBER,defaultValue:.015,label:"item ratio",template:"_number.html"}),fill:vs.ui.Setting.PredefinedSettings.fill,
stroke:vs.ui.Setting.PredefinedSettings.stroke,strokeThickness:vs.ui.Setting.PredefinedSettings.strokeThickness,selectFill:vs.ui.Setting.PredefinedSettings.selectFill,selectStroke:vs.ui.Setting.PredefinedSettings.selectStroke,selectStrokeThickness:vs.ui.Setting.PredefinedSettings.selectStrokeThickness});Object.defineProperties(N.prototype,{settings:{get:function(){return O}}});
N.prototype.endDraw=function(){var a=this,d=arguments;return(new Promise(function(b){var c=a.data;if(c.nrows){var d=a.optionValue("margins"),k=a.optionValue("xScale"),m=a.optionValue("yScale"),e=a.optionValue("cols"),g=a.optionValue("vals"),l=a.optionValue("itemRatio"),h=a.optionValue("width"),q=a.optionValue("height"),n=a.optionValue("fill"),p=a.optionValue("stroke"),r=a.optionValue("strokeThickness"),l=Math.min(Math.abs(h),Math.abs(q))*l,t=e[0],v=e[1],h=d3.select(a.$element[0]).select("svg"),e=
h.select(".viewport");e.empty()&&(e=h.append("g").attr("class","viewport"));e.attr("transform","translate("+d.left+", "+d.top+")");c=c.asDataRowArray();c=e.selectAll("circle").data(c,vs.models.DataSource.key);c.enter().append("circle").attr("class","vs-item");c.attr("r",l).attr("cx",function(a){return k(a.val(t,g))}).attr("cy",function(a){return m(a.val(v,g))}).attr("fill",n).style("stroke",p).style("stroke-width",r);c.exit().remove()}b()})).then(function(){return vs.ui.svg.SvgVis.prototype.endDraw.apply(a,
d)})};N.prototype.highlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("selectFill"),f=this.optionValue("selectStroke"),k=this.optionValue("selectStrokeThickness"),b=b.selectAll(".vs-item").data([d],vs.models.DataSource.key);b.style("stroke",f).style("stroke-width",k).style("fill",c);$(b[0]).appendTo($(a))};
N.prototype.unhighlightItem=function(a,d){var b=d3.select(a),c=this.optionValue("fill"),f=this.optionValue("stroke"),k=this.optionValue("strokeThickness");b.selectAll(".vs-item").data([d],vs.models.DataSource.key).style("stroke",f).style("stroke-width",k).style("fill",c)};A("vs.ui.plugins.canvas.Line",D);D.prototype.endDraw=D.prototype.endDraw;A("vs.ui.plugins.canvas.ManhattanPlot",vs.ui.plugins.canvas.a);vs.ui.plugins.canvas.a.prototype.endDraw=vs.ui.plugins.canvas.a.prototype.endDraw;vs.ui.plugins.canvas.a.prototype.getItemsAt=vs.ui.plugins.canvas.a.prototype.getItemsAt;vs.ui.plugins.canvas.a.prototype.highlightItem=vs.ui.plugins.canvas.a.prototype.highlightItem;A("vs.ui.plugins.canvas.ScatterPlot",vs.ui.plugins.canvas.b);vs.ui.plugins.canvas.b.prototype.endDraw=vs.ui.plugins.canvas.b.prototype.endDraw;vs.ui.plugins.canvas.b.prototype.getItemsAt=vs.ui.plugins.canvas.b.prototype.getItemsAt;vs.ui.plugins.canvas.b.prototype.highlightItem=vs.ui.plugins.canvas.b.prototype.highlightItem;A("vs.ui.plugins.svg.Demo",E);E.prototype.endDraw=E.prototype.endDraw;A("vs.ui.plugins.svg.Heatmap",L);L.prototype.endDraw=L.prototype.endDraw;L.prototype.highlightItem=L.prototype.highlightItem;L.prototype.unhighlightItem=L.prototype.unhighlightItem;A("vs.ui.plugins.svg.Line",H);H.prototype.endDraw=H.prototype.endDraw;A("vs.ui.plugins.svg.ManhattanPlot",F);F.prototype.endDraw=F.prototype.endDraw;F.prototype.highlightItem=F.prototype.highlightItem;F.prototype.unhighlightItem=F.prototype.unhighlightItem;A("vs.ui.plugins.svg.ScatterPlot",N);N.prototype.endDraw=N.prototype.endDraw;N.prototype.highlightItem=N.prototype.highlightItem;N.prototype.unhighlightItem=N.prototype.unhighlightItem;}).call(this); //@ sourceMappingURL=vs.ui.plugins.min.js.map
